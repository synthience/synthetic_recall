<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700" width="900" height="700">
  <!-- Background -->
  <rect width="900" height="700" fill="#f8f9fa" />
  
  <!-- Main Components -->
  <g id="memory-core" transform="translate(100, 180)">
    <rect x="0" y="0" width="700" height="440" rx="15" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" />
    <text x="350" y="30" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle">Enhanced Memory System</text>
    
    <!-- STM -->
    <rect x="30" y="60" width="140" height="80" rx="10" fill="#bbdefb" stroke="#1976d2" stroke-width="2" />
    <text x="100" y="90" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Short-Term Memory</text>
    <text x="100" y="110" font-family="Arial" font-size="11" text-anchor="middle">Recent interactions</text>
    
    <!-- LTM -->
    <rect x="30" y="240" width="140" height="80" rx="10" fill="#bbdefb" stroke="#1976d2" stroke-width="2" />
    <text x="100" y="270" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Long-Term Memory</text>
    <text x="100" y="290" font-family="Arial" font-size="11" text-anchor="middle">Significance-weighted</text>
    
    <!-- MPL -->
    <rect x="200" y="150" width="140" height="80" rx="10" fill="#bbdefb" stroke="#1976d2" stroke-width="2" />
    <text x="270" y="175" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Memory</text>
    <text x="270" y="195" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Prioritization</text>
    <text x="270" y="215" font-family="Arial" font-size="11" text-anchor="middle">Query routing</text>
    
    <!-- Self Model (NEW) -->
    <rect x="370" y="80" width="140" height="80" rx="10" fill="#b2dfdb" stroke="#00897b" stroke-width="2" />
    <text x="440" y="110" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Self Model</text>
    <text x="440" y="130" font-family="Arial" font-size="11" text-anchor="middle">Identity & capabilities</text>
    <text x="440" y="145" font-family="Arial" font-size="10" font-style="italic" fill="#00897b" text-anchor="middle">NEW</text>
    
    <!-- World Model (NEW) -->
    <rect x="370" y="240" width="140" height="80" rx="10" fill="#b2dfdb" stroke="#00897b" stroke-width="2" />
    <text x="440" y="270" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">World Model</text>
    <text x="440" y="290" font-family="Arial" font-size="11" text-anchor="middle">Conceptual knowledge</text>
    <text x="440" y="305" font-family="Arial" font-size="10" font-style="italic" fill="#00897b" text-anchor="middle">NEW</text>
    
    <!-- Knowledge Graph (NEW) -->
    <rect x="530" y="150" width="140" height="80" rx="10" fill="#b2dfdb" stroke="#00897b" stroke-width="2" />
    <text x="600" y="175" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Knowledge</text>
    <text x="600" y="195" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Graph</text>
    <text x="600" y="215" font-family="Arial" font-size="11" text-anchor="middle">Relationships</text>
    <text x="600" y="230" font-family="Arial" font-size="10" font-style="italic" fill="#00897b" text-anchor="middle">NEW</text>
    
    <!-- Dream Processor (NEW) -->
    <rect x="250" y="340" width="200" height="80" rx="10" fill="#b2dfdb" stroke="#00897b" stroke-width="2" />
    <text x="350" y="370" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Dream Processor</text>
    <text x="350" y="390" font-family="Arial" font-size="11" text-anchor="middle">Memory consolidation & refinement</text>
    <text x="350" y="405" font-family="Arial" font-size="10" font-style="italic" fill="#00897b" text-anchor="middle">NEW</text>
    
    <!-- Database (NEW) -->
    <rect x="530" y="340" width="140" height="80" rx="10" fill="#b2dfdb" stroke="#00897b" stroke-width="2" />
    <text x="600" y="370" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Optimized Storage</text>
    <text x="600" y="390" font-family="Arial" font-size="11" text-anchor="middle">Chunked files/DB</text>
    <text x="600" y="405" font-family="Arial" font-size="10" font-style="italic" fill="#00897b" text-anchor="middle">NEW</text>
    
    <!-- Arrows -->
    <line x1="100" y1="140" x2="100" y2="240" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)" />
    <line x1="170" y1="100" x2="200" y2="150" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)" />
    <line x1="170" y1="280" x2="200" y2="230" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)" />
    <line x1="340" y1="190" x2="370" y2="190" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)" />
    <line x1="440" y1="160" x2="440" y2="240" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)" />
    <line x1="510" y1="120" x2="530" y2="150" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)" />
    <line x1="510" y1="260" x2="530" y2="230" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)" />
    <line x1="600" y1="230" x2="600" y2="340" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)" />
    <line x1="350" y1="340" x2="350" y2="230" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)" />
    <line x1="250" y1="370" x2="170" y2="370" stroke="#1976d2" stroke-width="2" />
    <line x1="170" y1="370" x2="170" y2="320" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)" />
    <line x1="450" y1="370" x2="530" y2="370" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)" />
  </g>
  
  <!-- Input/Output Flow -->
  <g id="flow" transform="translate(150, 80)">
    <rect x="0" y="0" width="600" height="60" rx="10" fill="#f5f5f5" stroke="#616161" stroke-width="2" />
    
    <rect x="20" y="15" width="100" height="30" rx="5" fill="#e8f5e9" stroke="#43a047" stroke-width="1.5" />
    <text x="70" y="35" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Input</text>
    
    <rect x="140" y="15" width="100" height="30" rx="5" fill="#fff3e0" stroke="#ff9800" stroke-width="1.5" />
    <text x="190" y="35" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Perception</text>
    
    <rect x="260" y="15" width="100" height="30" rx="5" fill="#fff3e0" stroke="#ff9800" stroke-width="1.5" />
    <text x="310" y="35" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Context</text>
    
    <rect x="380" y="15" width="100" height="30" rx="5" fill="#fff3e0" stroke="#ff9800" stroke-width="1.5" />
    <text x="430" y="35" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Processing</text>
    
    <rect x="500" y="15" width="80" height="30" rx="5" fill="#e8f5e9" stroke="#43a047" stroke-width="1.5" />
    <text x="540" y="35" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Output</text>
    
    <!-- Arrows -->
    <line x1="120" y1="30" x2="140" y2="30" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead-small)" />
    <line x1="240" y1="30" x2="260" y2="30" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead-small)" />
    <line x1="360" y1="30" x2="380" y2="30" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead-small)" />
    <line x1="480" y1="30" x2="500" y2="30" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead-small)" />
    
    <!-- Connections to memory -->
    <line x1="310" y1="45" x2="310" y2="100" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead-small)" />
    <line x1="390" y1="100" x2="390" y2="45" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead-small)" />
  </g>
  
  <!-- External Services -->
  <g id="external" transform="translate(150, 635)">
    <rect x="0" y="0" width="600" height="50" rx="10" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2" />
    
    <rect x="20" y="10" width="130" height="30" rx="5" fill="#e1bee7" stroke="#8e24aa" stroke-width="1.5" />
    <text x="85" y="30" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Tensor Server</text>
    
    <rect x="170" y="10" width="130" height="30" rx="5" fill="#e1bee7" stroke="#8e24aa" stroke-width="1.5" />
    <text x="235" y="30" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">HPC Server</text>
    
    <rect x="320" y="10" width="130" height="30" rx="5" fill="#e1bee7" stroke="#8e24aa" stroke-width="1.5" />
    <text x="385" y="30" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Sentiment Models</text>
    
    <rect x="470" y="10" width="110" height="30" rx="5" fill="#e1bee7" stroke="#8e24aa" stroke-width="1.5" />
    <text x="525" y="30" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Schedule API</text>
    
    <!-- Connections to memory core -->
    <line x1="85" y1="10" x2="85" y2="-25" stroke="#9c27b0" stroke-width="1.5" marker-end="url(#arrowhead-small)" />
    <line x1="235" y1="10" x2="235" y2="-25" stroke="#9c27b0" stroke-width="1.5" marker-end="url(#arrowhead-small)" />
    <line x1="385" y1="10" x2="385" y2="-25" stroke="#9c27b0" stroke-width="1.5" marker-end="url(#arrowhead-small)" />
    <line x1="525" y1="10" x2="525" y2="-25" stroke="#9c27b0" stroke-width="1.5" marker-end="url(#arrowhead-small)" />
  </g>
  
  <!-- Title -->
  <text x="450" y="30" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle">Enhanced Lucidia Memory Architecture</text>
  
  <!-- Enhancement Notes -->
  <g id="notes" transform="translate(15, 40)">
    <text x="0" y="0" font-family="Arial" font-size="14" font-weight="bold" fill="#00897b">Key Enhancements:</text>
    <text x="0" y="20" font-family="Arial" font-size="12" fill="#00897b">â€¢ Self-model for identity awareness</text>
    <text x="0" y="40" font-family="Arial" font-size="12" fill="#00897b">â€¢ Knowledge graph for relationships</text>
    <text x="0" y="60" font-family="Arial" font-size="12" fill="#00897b">â€¢ Dream processor for offline memory refinement</text>
    <text x="0" y="80" font-family="Arial" font-size="12" fill="#00897b">â€¢ Optimized storage to reduce file count</text>
  </g>
  
  <!-- Markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#1976d2" />
    </marker>
    <marker id="arrowhead-small" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#616161" />
    </marker>
  </defs>
</svg>
